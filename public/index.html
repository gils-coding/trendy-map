<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>íŠ¸ë Œë””ë§µ â€” ìœ í–‰ ë§›ì§‘ ì§€ë„</title>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5362877670530574"
    crossorigin="anonymous"></script>
  <script type="text/javascript"
    src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=622851c76acbe34dcda4cce3cc03c38b&libraries=services">
    </script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Black+Han+Sans&family=Noto+Sans+KR:wght@300;400;500;700&display=swap');

    *,
    *::before,
    *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    :root {
      --bg: #f7f7f5;
      --surface: #ffffff;
      --card: #f2f2f0;
      --accent: #ff6b35;
      --accent2: #ff9500;
      --text: #1a1a1a;
      --muted: #888888;
      --border: #e0e0e0;
      --tag-bg: #f0f0ee;
      --open: #22a85a;
      --closed: #e03434;
    }

    body {
      font-family: 'Noto Sans KR', sans-serif;
      background: var(--bg);
      color: var(--text);
      height: 100vh;
      height: 100dvh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    /* í—¤ë” */
    header {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 16px;
      background: var(--surface);
      border-bottom: 1.5px solid var(--border);
      z-index: 100;
      flex-shrink: 0;
    }

    .logo {
      font-family: 'Black Han Sans', sans-serif;
      font-size: 20px;
      color: var(--accent);
      white-space: nowrap;
    }

    .logo span {
      color: var(--accent2);
    }

    .tabs {
      display: flex;
      gap: 6px;
      overflow-x: auto;
      scrollbar-width: none;
      flex: 1;
      min-width: 0;
    }

    .tabs::-webkit-scrollbar {
      display: none;
    }

    .tab {
      display: flex;
      align-items: center;
      gap: 5px;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
      white-space: nowrap;
      border: 1.5px solid var(--border);
      background: var(--surface);
      color: var(--muted);
      transition: all 0.2s;
      flex-shrink: 0;
    }

    .tab:hover {
      border-color: var(--accent);
      color: var(--accent);
    }

    .tab.active {
      background: var(--accent);
      border-color: var(--accent);
      color: #fff;
      font-weight: 700;
    }

    .suggest-btn {
      padding: 6px 12px;
      background: var(--accent2);
      color: #fff;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 700;
      text-decoration: none;
      white-space: nowrap;
      flex-shrink: 0;
    }

    .suggest-btn:hover {
      opacity: 0.85;
    }

    /* ì§€ì—­ ê²€ìƒ‰ë°” */
    .region-bar {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px;
      background: var(--surface);
      border-bottom: 1.5px solid var(--border);
      flex-shrink: 0;
      flex-wrap: wrap;
    }

    .region-search {
      display: flex;
      gap: 6px;
      flex: 1;
      min-width: 160px;
    }

    .region-input {
      flex: 1;
      background: var(--card);
      border: 1.5px solid var(--border);
      border-radius: 8px;
      padding: 7px 12px;
      color: var(--text);
      font-size: 13px;
      font-family: inherit;
      outline: none;
    }

    .region-input:focus {
      border-color: var(--accent);
    }

    .region-input::placeholder {
      color: var(--muted);
    }

    .region-btn {
      padding: 7px 14px;
      background: var(--accent);
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 700;
      cursor: pointer;
      white-space: nowrap;
      font-family: inherit;
    }

    .sido-select,
    .sigungu-select {
      background: var(--card);
      border: 1.5px solid var(--border);
      border-radius: 8px;
      padding: 7px 10px;
      color: var(--text);
      font-size: 12px;
      font-family: inherit;
      outline: none;
      cursor: pointer;
    }

    .sido-select {
      min-width: 85px;
    }

    .sigungu-select {
      min-width: 95px;
    }

    /* ë©”ì¸ ë ˆì´ì•„ì›ƒ */
    .main {
      display: flex;
      flex: 1;
      overflow: hidden;
    }

    /* ì‚¬ì´ë“œë°” (PC) */
    .sidebar {
      width: 320px;
      flex-shrink: 0;
      background: var(--surface);
      border-right: 1.5px solid var(--border);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .sidebar-header {
      padding: 14px 18px 10px;
      border-bottom: 1.5px solid var(--border);
    }

    .sidebar-header h2 {
      font-family: 'Black Han Sans', sans-serif;
      font-size: 16px;
      color: var(--text);
    }

    .sidebar-header p {
      font-size: 11px;
      color: var(--muted);
      margin-top: 3px;
    }

    .store-list {
      flex: 1;
      overflow-y: auto;
      scrollbar-width: thin;
      scrollbar-color: var(--border) transparent;
    }

    .bottom-handle {
      display: none;
    }

    /* ë¡œë”© */
    .loading {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 160px;
      gap: 10px;
      color: var(--muted);
      font-size: 12px;
    }

    .spinner {
      width: 28px;
      height: 28px;
      border: 3px solid var(--border);
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    /* ë§¤ì¥ ëª©ë¡ */
    .store-item {
      padding: 13px 18px;
      border-bottom: 1.5px solid var(--border);
      cursor: pointer;
      transition: background 0.15s;
    }

    .store-item:hover,
    .store-item.selected {
      background: var(--card);
    }

    .store-item.selected {
      border-left: 3px solid var(--accent);
      padding-left: 15px;
    }

    .store-name {
      font-weight: 700;
      font-size: 13px;
      margin-bottom: 3px;
      color: var(--text);
    }

    .store-addr {
      font-size: 11px;
      color: var(--muted);
      margin-bottom: 6px;
    }

    .store-meta {
      display: flex;
      gap: 5px;
      flex-wrap: wrap;
      align-items: center;
    }

    .badge {
      font-size: 10px;
      padding: 2px 7px;
      border-radius: 8px;
      font-weight: 500;
      background: var(--tag-bg);
      color: var(--muted);
      border: 1px solid var(--border);
    }


    /* ì§€ë„ */
    .map-area {
      flex: 1;
      position: relative;
    }

    #map {
      width: 100%;
      height: 100%;
    }

    .map-loading {
      position: absolute;
      top: 12px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--surface);
      border: 1.5px solid var(--border);
      border-radius: 20px;
      padding: 8px 16px;
      font-size: 12px;
      color: var(--muted);
      z-index: 50;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      opacity: 0;
      transition: opacity 0.2s;
      pointer-events: none;
    }

    .map-loading.show {
      opacity: 1;
    }

    .map-loading .mini-spinner {
      width: 14px;
      height: 14px;
      border: 2px solid var(--border);
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
    }

    /* ìƒì„¸ íŒ¨ë„ */
    .detail-panel {
      position: absolute;
      bottom: 20px;
      right: 20px;
      width: 300px;
      background: var(--surface);
      border: 1.5px solid var(--border);
      border-radius: 14px;
      overflow: hidden;
      box-shadow: 0 4px 24px rgba(0, 0, 0, 0.12);
      transform: translateY(16px);
      opacity: 0;
      pointer-events: none;
      transition: all 0.25s ease;
      z-index: 50;
      max-height: calc(100vh - 160px);
      overflow-y: auto;
    }

    .detail-panel.show {
      transform: translateY(0);
      opacity: 1;
      pointer-events: all;
    }

    .detail-top {
      padding: 8px 18px 8px;
      border-bottom: 1.5px solid var(--border);
    }

    .detail-name {
      font-family: 'Black Han Sans', sans-serif;
      font-size: 17px;
      margin-bottom: 4px;
      padding-right: 26px;
      line-height: 1.3;
      color: var(--text);
    }


    .info-list {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .info-row {
      display: flex;
      align-items: flex-start;
      gap: 9px;
      font-size: 12px;
    }

    .info-icon {
      flex-shrink: 0;
      width: 16px;
      text-align: center;
      margin-top: 1px;
    }

    .info-val {
      color: var(--text);
      line-height: 1.6;
    }

    .info-val.accent {
      color: var(--accent);
      font-weight: 600;
    }

    .detail-bottom {
      padding: 12px 14px;
      display: flex;
      gap: 7px;
    }

    .btn {
      flex: 1;
      display: block;
      padding: 9px 0;
      border-radius: 7px;
      text-align: center;
      text-decoration: none;
      font-weight: 700;
      font-size: 12px;
      transition: opacity 0.15s;
    }

    .btn:hover {
      opacity: 0.85;
    }

    .btn-naver {
      background: #03c75a;
      color: #fff;
    }

    .btn-kakao {
      background: var(--accent);
      color: #fff;
    }

    .close-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: var(--card);
      border: 1.5px solid var(--border);
      color: var(--muted);
      font-size: 13px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }

    .error-msg {
      padding: 20px 16px;
      text-align: center;
      color: var(--muted);
      font-size: 12px;
      line-height: 1.8;
    }

    .error-msg strong {
      color: var(--accent);
      display: block;
      margin-bottom: 6px;
      font-size: 13px;
    }

    /* ëª¨ë°”ì¼ ë°”í…€ì‹œíŠ¸ */
    @media (max-width: 768px) {
      body {
        overflow: hidden;
        height: 100dvh;
      }

      .logo {
        font-size: 17px;
      }

      header {
        padding: 8px 12px;
        gap: 6px;
      }

      /* ì§€ì—­ ê²€ìƒ‰ë°”: ë‘ ì¤„ ë ˆì´ì•„ì›ƒ */
      .region-bar {
        padding: 5px 10px;
        gap: 5px;
        flex-wrap: wrap;
        overflow: hidden;
      }

      .sido-select {
        min-width: 0;
        flex: 1;
        font-size: 11px;
        padding: 5px 4px;
      }

      .sigungu-select {
        min-width: 0;
        flex: 1;
        font-size: 11px;
        padding: 5px 4px;
      }

      .region-search {
        flex: 0 0 100%;
        display: flex;
        gap: 5px;
      }

      .region-input {
        flex: 1;
        min-width: 0;
        font-size: 12px;
        padding: 5px 8px;
      }

      .region-btn {
        flex-shrink: 0;
        padding: 5px 14px;
        font-size: 12px;
      }

      /* ë©”ì¸: ì§€ë„ ê³ ì • + ëª©ë¡ ë‚˜ë¨¸ì§€ */
      .main {
        flex-direction: column;
        flex: 1;
        overflow: hidden;
      }

      .map-area {
        height: 290px;
        flex-shrink: 0;
        position: relative;
      }

      #map {
        width: 100%;
        height: 100%;
      }

      /* ì‚¬ì´ë“œë°”: ë‚˜ë¨¸ì§€ ê³µê°„ ì „ë¶€ */
      .sidebar {
        width: 100%;
        flex: 1;
        border-right: none;
        border-top: 1.5px solid var(--border);
        display: flex;
        flex-direction: column;
        overflow: hidden;
        min-height: 0;
      }

      /* ì†ì¡ì´ ìˆ¨ê¹€ */
      .bottom-handle {
        display: none;
      }

      /* í—¤ë”: ì¹´ìš´íŠ¸ ì¸ë¼ì¸ */
      .sidebar-header {
        padding: 7px 14px;
        cursor: default;
        display: flex;
        align-items: baseline;
        gap: 6px;
        flex-wrap: wrap;
      }

      .sidebar-header h2 {
        font-size: 14px;
      }

      .sidebar-header p {
        font-size: 11px;
        color: var(--muted);
      }

      .store-list {
        overflow-y: auto;
        flex: 1;
        -webkit-overflow-scrolling: touch;
      }

      /* ìƒì„¸ íŒ¨ë„ */
      .detail-panel {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        width: 100%;
        border-radius: 14px 14px 0 0;
        max-height: 55vh;
        z-index: 300;
      }
    }

    @media (max-width: 480px) {
      .tab {
        padding: 5px 9px;
        font-size: 11px;
      }

      .suggest-btn {
        font-size: 11px;
        padding: 5px 9px;
      }
    }
  </style>
</head>

<body>

  <header>
    <div class="logo">íŠ¸ë Œë””<span>ë§µ</span></div>
    <div class="tabs">
      <div class="tab active" data-query="ë‘ë°”ì´ ì«€ë“ì¿ í‚¤" data-emoji="ğŸª" onclick="switchCategory(this)">ğŸª ë‘ë°”ì´ ì«€ë“ì¿ í‚¤</div>
      <div class="tab" data-query="ì†Œê¸ˆë¹µ" data-emoji="ğŸ¥" onclick="switchCategory(this)">ğŸ¥ ì†Œê¸ˆë¹µ</div>
      <div class="tab" data-query="íƒ•í›„ë£¨" data-emoji="ğŸ¡" onclick="switchCategory(this)">ğŸ¡ íƒ•í›„ë£¨</div>
      <div class="tab" data-query="í¬ë¡œí”Œ" data-emoji="ğŸ§‡" onclick="switchCategory(this)">ğŸ§‡ í¬ë¡œí”Œ</div>
      <div class="tab" data-query="ë§ˆë¼íƒ•" data-emoji="ğŸŒ¶ï¸" onclick="switchCategory(this)">ğŸŒ¶ï¸ ë§ˆë¼íƒ•</div>
    </div>
    <a href="https://forms.gle/ecy5DprNYSAgPesc7" target="_blank" class="suggest-btn">âœ¨ ìƒí’ˆ ì œì•ˆ</a>
  </header>

  <div class="region-bar">
    <select class="sido-select" id="sidoSelect" onchange="onSidoChange()">
      <option value="">ì‹œ/ë„ ì„ íƒ</option>
      <option value="ì„œìš¸">ì„œìš¸</option>
      <option value="ê²½ê¸°">ê²½ê¸°</option>
      <option value="ì¸ì²œ">ì¸ì²œ</option>
      <option value="ë¶€ì‚°">ë¶€ì‚°</option>
      <option value="ëŒ€êµ¬">ëŒ€êµ¬</option>
      <option value="ëŒ€ì „">ëŒ€ì „</option>
      <option value="ê´‘ì£¼">ê´‘ì£¼</option>
      <option value="ìš¸ì‚°">ìš¸ì‚°</option>
      <option value="ì„¸ì¢…">ì„¸ì¢…</option>
      <option value="ê°•ì›">ê°•ì›</option>
      <option value="ì¶©ë¶">ì¶©ë¶</option>
      <option value="ì¶©ë‚¨">ì¶©ë‚¨</option>
      <option value="ì „ë¶">ì „ë¶</option>
      <option value="ì „ë‚¨">ì „ë‚¨</option>
      <option value="ê²½ë¶">ê²½ë¶</option>
      <option value="ê²½ë‚¨">ê²½ë‚¨</option>
      <option value="ì œì£¼">ì œì£¼</option>
    </select>
    <select class="sigungu-select" id="sigunguSelect" onchange="onSigunguChange()" disabled>
      <option value="">ì‹œ/êµ°/êµ¬ ì„ íƒ</option>
    </select>
    <div class="region-search">
      <input class="region-input" id="regionInput" type="text" placeholder="ì§€ì—­ ì§ì ‘ ê²€ìƒ‰ (ì˜ˆ: ë§ˆí¬êµ¬)"
        onkeydown="if(event.key==='Enter') searchRegion()" />
      <button class="region-btn" onclick="searchRegion()">ì´ë™</button>
    </div>
  </div>

  <div class="main">
    <div class="map-area">
      <div id="map"></div>
      <div class="map-loading" id="mapLoading">
        <div class="mini-spinner"></div>
        <span>ì´ ì§€ì—­ ë§¤ì¥ ê²€ìƒ‰ ì¤‘...</span>
      </div>
      <!-- ìƒì„¸ íŒ¨ë„ -->
      <div class="detail-panel" id="detailPanel">
        <button class="close-btn" onclick="closeDetail()">âœ•</button>
        <div class="detail-top">
          <div class="detail-name" id="detailName"></div>
          <div class="info-list">
            <div class="info-row">
              <span class="info-icon">ğŸ“</span>
              <span class="info-val" id="detailAddr"></span>
            </div>
            <div class="info-row" id="detailPhoneRow" style="display:none">
              <span class="info-icon">ğŸ“</span>
              <span class="info-val accent" id="detailPhone"></span>
            </div>
          </div>
        </div>
        <div class="detail-bottom">
          <a class="btn btn-naver" id="btnNaver" href="#" target="_blank">ë„¤ì´ë²„ì§€ë„</a>
          <a class="btn btn-kakao" id="btnKakao" href="#" target="_blank">ì¹´ì¹´ì˜¤ë§µ</a>
        </div>
      </div>
    </div>

    <!-- ì‚¬ì´ë“œë°” / ëª¨ë°”ì¼ ë°”í…€ì‹œíŠ¸ -->
    <div class="sidebar" id="sidebar">
      <div class="bottom-handle" onclick="toggleBottomSheet()">
        <div class="handle-bar"></div>
      </div>
      <div class="sidebar-header" onclick="toggleBottomSheet()">
        <h2 id="sidebar-title">ğŸª ë‘ë°”ì´ ì«€ë“ì¿ í‚¤</h2>
        <p id="sidebar-count">ì§€ë„ë¥¼ ì›€ì§ì´ë©´ í•´ë‹¹ ì§€ì—­ ë§¤ì¥ì´ í‘œì‹œë©ë‹ˆë‹¤</p>
      </div>
      <div class="store-list" id="storeList">
        <div class="loading">
          <div class="spinner"></div>ë§¤ì¥ ê²€ìƒ‰ ì¤‘...
        </div>
      </div>
      <div id="coupangBanner"
        style="display:none; border-top: 1px solid var(--border); flex-shrink: 0; background: var(--surface); overflow: hidden; width: 100%;">
        <div id="coupangItems" style="width: 100%;"></div>
      </div>
      <div
        style="text-align:center; padding: 4px; border-top: 1px solid var(--border); flex-shrink: 0; line-height: 1.6;">
        <a href="/legal.html"
          style="font-size: 4px; color: var(--muted); text-decoration: none; margin-right: 6px;">ì´ìš©ì•½ê´€Â·ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
        <a href="/about.html" style="font-size: 4px; color: var(--muted); text-decoration: none; margin-right: 6px;">ì„œë¹„ìŠ¤
          ì†Œê°œ</a>
        <span style="font-size: 4px; color: var(--muted);">ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ ìˆ˜ìˆ˜ë£Œ ì œê³µ</span>
      </div>
    </div>
  </div>

  <!-- êµ¬ê¸€ í¬ë¡¤ëŸ¬ìš© ì •ì  ì½˜í…ì¸  (SEO) -->
  <div style="position:absolute;left:-9999px;top:-9999px;width:1px;height:1px;overflow:hidden;" aria-hidden="true">
    <h1>íŠ¸ë Œë””ë§µ - ìœ í–‰ ë§›ì§‘ ì§€ë„</h1>
    <p>íŠ¸ë Œë””ë§µì€ ë‘ë°”ì´ ì«€ë“ì¿ í‚¤, ì†Œê¸ˆë¹µ, íƒ•í›„ë£¨, í¬ë¡œí”Œ, ë§ˆë¼íƒ• ë“± í˜„ì¬ ìœ í–‰ ì¤‘ì¸ ìŒì‹ ë§¤ì¥ì„ ì§€ë„ì—ì„œ ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.</p>
    <h2>íŠ¸ë Œë””ë§µ ì£¼ìš” ê¸°ëŠ¥</h2>
    <ul>
      <li>ë‘ë°”ì´ ì«€ë“ì¿ í‚¤ ë§¤ì¥ ì§€ë„ ê²€ìƒ‰</li>
      <li>ì†Œê¸ˆë¹µ ë§›ì§‘ ìœ„ì¹˜ í™•ì¸</li>
      <li>íƒ•í›„ë£¨ íŒë§¤ì  ì§€ë„</li>
      <li>í¬ë¡œí”Œ ì¹´í˜ ì°¾ê¸°</li>
      <li>ë§ˆë¼íƒ• ì‹ë‹¹ ê²€ìƒ‰</li>
      <li>ì‹œ/ë„, ì‹œ/êµ°/êµ¬ë³„ ì§€ì—­ ê²€ìƒ‰</li>
      <li>ì¹´ì¹´ì˜¤ë§µ, ë„¤ì´ë²„ì§€ë„ ë°”ë¡œê°€ê¸°</li>
    </ul>
    <h2>ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</h2>
    <h3>íŠ¸ë Œë””ë§µì€ ë¬´ë£Œì¸ê°€ìš”?</h3>
    <p>ë„¤, íŠ¸ë Œë””ë§µì€ ëˆ„êµ¬ë‚˜ ë¬´ë£Œë¡œ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    <h3>ë§¤ì¥ ì •ë³´ëŠ” ì–¼ë§ˆë‚˜ ì •í™•í•œê°€ìš”?</h3>
    <p>ë§¤ì¥ ì •ë³´ëŠ” ì¹´ì¹´ì˜¤ ë¡œì»¬ API ê¸°ë°˜ìœ¼ë¡œ ì œê³µë˜ë©°, ì‹¤ì œ ì˜ì—… ì—¬ë¶€ëŠ” ë°©ë¬¸ ì „ ë§¤ì¥ì— ì§ì ‘ í™•ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
    <h3>ì–´ë–¤ ìŒì‹ì„ ê²€ìƒ‰í•  ìˆ˜ ìˆë‚˜ìš”?</h3>
    <p>ë‘ë°”ì´ ì«€ë“ì¿ í‚¤, ì†Œê¸ˆë¹µ, íƒ•í›„ë£¨, í¬ë¡œí”Œ, ë§ˆë¼íƒ• ë“± í˜„ì¬ SNSì—ì„œ ìœ í–‰ ì¤‘ì¸ ìŒì‹ ì¹´í…Œê³ ë¦¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>
    <h3>ë‚´ ì£¼ë³€ ë§¤ì¥ì„ ì°¾ì„ ìˆ˜ ìˆë‚˜ìš”?</h3>
    <p>ì§€ë„ë¥¼ ì›í•˜ëŠ” ì§€ì—­ìœ¼ë¡œ ì´ë™í•˜ê±°ë‚˜ ì§€ì—­ ê²€ìƒ‰ì°½ì— ë™ë„¤ ì´ë¦„ì„ ì…ë ¥í•˜ë©´ í•´ë‹¹ ì§€ì—­ì˜ ë§¤ì¥ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    <h3>ìƒˆë¡œìš´ ìœ í–‰ ìŒì‹ì€ ì¶”ê°€ë˜ë‚˜ìš”?</h3>
    <p>SNSì—ì„œ ìƒˆë¡œìš´ ìŒì‹ì´ ìœ í–‰í•˜ë©´ ì¹´í…Œê³ ë¦¬ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤. ìƒí’ˆ ì œì•ˆ ë²„íŠ¼ì„ í†µí•´ ì¶”ê°€ ìš”ì²­ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
  </div>

  <script>
    const SIGUNGU_DATA = {
      'ì„œìš¸': ['ê°•ë‚¨êµ¬', 'ê°•ë™êµ¬', 'ê°•ë¶êµ¬', 'ê°•ì„œêµ¬', 'ê´€ì•…êµ¬', 'ê´‘ì§„êµ¬', 'êµ¬ë¡œêµ¬', 'ê¸ˆì²œêµ¬', 'ë…¸ì›êµ¬', 'ë„ë´‰êµ¬', 'ë™ëŒ€ë¬¸êµ¬', 'ë™ì‘êµ¬', 'ë§ˆí¬êµ¬', 'ì„œëŒ€ë¬¸êµ¬', 'ì„œì´ˆêµ¬', 'ì„±ë™êµ¬', 'ì„±ë¶êµ¬', 'ì†¡íŒŒêµ¬', 'ì–‘ì²œêµ¬', 'ì˜ë“±í¬êµ¬', 'ìš©ì‚°êµ¬', 'ì€í‰êµ¬', 'ì¢…ë¡œêµ¬', 'ì¤‘êµ¬', 'ì¤‘ë‘êµ¬'],
      'ê²½ê¸°': ['ìˆ˜ì›ì‹œ', 'ì„±ë‚¨ì‹œ', 'ì˜ì •ë¶€ì‹œ', 'ì•ˆì–‘ì‹œ', 'ë¶€ì²œì‹œ', 'ê´‘ëª…ì‹œ', 'í‰íƒì‹œ', 'ë™ë‘ì²œì‹œ', 'ì•ˆì‚°ì‹œ', 'ê³ ì–‘ì‹œ', 'ê³¼ì²œì‹œ', 'êµ¬ë¦¬ì‹œ', 'ë‚¨ì–‘ì£¼ì‹œ', 'ì˜¤ì‚°ì‹œ', 'ì‹œí¥ì‹œ', 'êµ°í¬ì‹œ', 'ì˜ì™•ì‹œ', 'í•˜ë‚¨ì‹œ', 'ìš©ì¸ì‹œ', 'íŒŒì£¼ì‹œ', 'ì´ì²œì‹œ', 'ì•ˆì„±ì‹œ', 'ê¹€í¬ì‹œ', 'í™”ì„±ì‹œ', 'ê´‘ì£¼ì‹œ', 'ì–‘ì£¼ì‹œ', 'í¬ì²œì‹œ', 'ì—¬ì£¼ì‹œ', 'ì—°ì²œêµ°', 'ê°€í‰êµ°', 'ì–‘í‰êµ°'],
      'ì¸ì²œ': ['ì¤‘êµ¬', 'ë™êµ¬', 'ë¯¸ì¶”í™€êµ¬', 'ì—°ìˆ˜êµ¬', 'ë‚¨ë™êµ¬', 'ë¶€í‰êµ¬', 'ê³„ì–‘êµ¬', 'ì„œêµ¬', 'ê°•í™”êµ°', 'ì˜¹ì§„êµ°'],
      'ë¶€ì‚°': ['ì¤‘êµ¬', 'ì„œêµ¬', 'ë™êµ¬', 'ì˜ë„êµ¬', 'ë¶€ì‚°ì§„êµ¬', 'ë™ë˜êµ¬', 'ë‚¨êµ¬', 'ë¶êµ¬', 'í•´ìš´ëŒ€êµ¬', 'ì‚¬í•˜êµ¬', 'ê¸ˆì •êµ¬', 'ê°•ì„œêµ¬', 'ì—°ì œêµ¬', 'ìˆ˜ì˜êµ¬', 'ì‚¬ìƒêµ¬', 'ê¸°ì¥êµ°'],
      'ëŒ€êµ¬': ['ì¤‘êµ¬', 'ë™êµ¬', 'ì„œêµ¬', 'ë‚¨êµ¬', 'ë¶êµ¬', 'ìˆ˜ì„±êµ¬', 'ë‹¬ì„œêµ¬', 'ë‹¬ì„±êµ°'],
      'ëŒ€ì „': ['ë™êµ¬', 'ì¤‘êµ¬', 'ì„œêµ¬', 'ìœ ì„±êµ¬', 'ëŒ€ë•êµ¬'],
      'ê´‘ì£¼': ['ë™êµ¬', 'ì„œêµ¬', 'ë‚¨êµ¬', 'ë¶êµ¬', 'ê´‘ì‚°êµ¬'],
      'ìš¸ì‚°': ['ì¤‘êµ¬', 'ë‚¨êµ¬', 'ë™êµ¬', 'ë¶êµ¬', 'ìš¸ì£¼êµ°'],
      'ì„¸ì¢…': ['ì„¸ì¢…ì‹œ'],
      'ê°•ì›': ['ì¶˜ì²œì‹œ', 'ì›ì£¼ì‹œ', 'ê°•ë¦‰ì‹œ', 'ë™í•´ì‹œ', 'íƒœë°±ì‹œ', 'ì†ì´ˆì‹œ', 'ì‚¼ì²™ì‹œ', 'í™ì²œêµ°', 'íš¡ì„±êµ°', 'ì˜ì›”êµ°', 'í‰ì°½êµ°', 'ì •ì„ êµ°', 'ì² ì›êµ°', 'í™”ì²œêµ°', 'ì–‘êµ¬êµ°', 'ì¸ì œêµ°', 'ê³ ì„±êµ°', 'ì–‘ì–‘êµ°'],
      'ì¶©ë¶': ['ì²­ì£¼ì‹œ', 'ì¶©ì£¼ì‹œ', 'ì œì²œì‹œ', 'ë³´ì€êµ°', 'ì˜¥ì²œêµ°', 'ì˜ë™êµ°', 'ì¦í‰êµ°', 'ì§„ì²œêµ°', 'ê´´ì‚°êµ°', 'ìŒì„±êµ°', 'ë‹¨ì–‘êµ°'],
      'ì¶©ë‚¨': ['ì²œì•ˆì‹œ', 'ê³µì£¼ì‹œ', 'ë³´ë ¹ì‹œ', 'ì•„ì‚°ì‹œ', 'ì„œì‚°ì‹œ', 'ë…¼ì‚°ì‹œ', 'ê³„ë£¡ì‹œ', 'ë‹¹ì§„ì‹œ', 'ê¸ˆì‚°êµ°', 'ë¶€ì—¬êµ°', 'ì„œì²œêµ°', 'ì²­ì–‘êµ°', 'í™ì„±êµ°', 'ì˜ˆì‚°êµ°', 'íƒœì•ˆêµ°'],
      'ì „ë¶': ['ì „ì£¼ì‹œ', 'êµ°ì‚°ì‹œ', 'ìµì‚°ì‹œ', 'ì •ìì‹œ', 'ë‚¨ì›ì‹œ', 'ê¹€ì œì‹œ', 'ì™„ì£¼êµ°', 'ì§„ì•ˆêµ°', 'ë¬´ì£¼êµ°', 'ì¥ìˆ˜êµ°', 'ì„ì‹¤êµ°', 'ìˆœì°½êµ°', 'ê³ ì°½êµ°', 'ë¶€ì•ˆêµ°'],
      'ì „ë‚¨': ['ëª©í¬ì‹œ', 'ì—¬ìˆ˜ì‹œ', 'ìˆœì²œì‹œ', 'ë‚˜ì£¼ì‹œ', 'ê´‘ì–‘ì‹œ', 'ë‹´ì–‘êµ°', 'ê³¡ì„±êµ°', 'êµ¬ë¡€êµ°', 'ê³ í¥êµ°', 'ë³´ì„±êµ°', 'í™”ìˆœêµ°', 'ì¥í¥êµ°', 'ê°•ì§„êµ°', 'í•´ë‚¨êµ°', 'ì˜ì•”êµ°', 'ë¬´ì•ˆêµ°', 'í•¨í‰êµ°', 'ì˜ê´‘êµ°', 'ì¥ì„±êµ°', 'ì™„ë„êµ°', 'ì§„ë„êµ°', 'ì‹ ì•ˆêµ°'],
      'ê²½ë¶': ['í¬í•­ì‹œ', 'ê²½ì£¼ì‹œ', 'ê¹€ì²œì‹œ', 'ì•ˆë™ì‹œ', 'êµ¬ë¯¸ì‹œ', 'ì˜ì£¼ì‹œ', 'ì˜ì²œì‹œ', 'ìƒì£¼ì‹œ', 'ë¬¸ê²½ì‹œ', 'ê²½ì‚°ì‹œ', 'ì˜ì„±êµ°', 'ì²­ì†¡êµ°', 'ì˜ì–‘êµ°', 'ì˜ë•êµ°', 'ì²­ë„êµ°', 'ê³ ë ¹êµ°', 'ì„±ì£¼êµ°', 'ì¹ ê³¡êµ°', 'ì˜ˆì²œêµ°', 'ë´‰í™”êµ°', 'ìš¸ì§„êµ°', 'ìš¸ë¦‰êµ°'],
      'ê²½ë‚¨': ['ì°½ì›ì‹œ', 'ì§„ì£¼ì‹œ', 'í†µì˜ì‹œ', 'ì‚¬ì²œì‹œ', 'ê¹€í•´ì‹œ', 'ë°€ì–‘ì‹œ', 'ê±°ì œì‹œ', 'ì–‘ì‚°ì‹œ', 'ì˜ë ¹êµ°', 'í•¨ì•ˆêµ°', 'ì°½ë…•êµ°', 'ê³ ì„±êµ°', 'ë‚¨í•´êµ°', 'í•˜ë™êµ°', 'ì‚°ì²­êµ°', 'í•¨ì–‘êµ°', 'ê±°ì°½êµ°', 'í•©ì²œêµ°'],
      'ì œì£¼': ['ì œì£¼ì‹œ', 'ì„œê·€í¬ì‹œ'],
    };

    const COLORS = {
      'ë‘ë°”ì´ ì«€ë“ì¿ í‚¤': '#CCFFCC',
      'ì†Œê¸ˆë¹µ': '#FEFFDE',
      'íƒ•í›„ë£¨': '#FFE8E8',
      'í¬ë¡œí”Œ': '#FEFFDE',
      'ë§ˆë¼íƒ•': '#FFE8E8',
    };

    let kakaoMap = null;
    let markers = [];
    let currentQuery = 'ë‘ë°”ì´ ì«€ë“ì¿ í‚¤';
    let currentEmoji = 'ğŸª';
    let searchTimer = null;
    let isSearching = false;

    function initMap() {
      kakaoMap = new kakao.maps.Map(document.getElementById('map'), {
        center: new kakao.maps.LatLng(37.5665, 126.9784),
        level: 7,
      });
      kakao.maps.event.addListener(kakaoMap, 'dragend', () => scheduleSearch());
      kakao.maps.event.addListener(kakaoMap, 'zoom_changed', () => scheduleSearch());
      loadStores();
    }

    function scheduleSearch() {
      clearTimeout(searchTimer);
      searchTimer = setTimeout(() => loadStores(), 500);
    }

    async function loadStores() {
      if (isSearching) return;
      isSearching = true;

      const center = kakaoMap.getCenter();
      const lat = center.getLat();
      const lng = center.getLng();
      const level = kakaoMap.getLevel();
      const radius = Math.min(level * 700, 20000);

      showMapLoading(true);
      closeDetail();
      clearMarkers();
      document.getElementById('storeList').innerHTML = '<div class="loading"><div class="spinner"></div>ë§¤ì¥ ê²€ìƒ‰ ì¤‘...</div>';
      document.getElementById('sidebar-count').textContent = 'ê²€ìƒ‰ ì¤‘...';

      try {
        const url = `/api/stores?query=${encodeURIComponent(currentQuery)}&lat=${lat}&lng=${lng}&radius=${radius}`;
        const res = await fetch(url);
        const data = await res.json();
        if (data.error) throw new Error(data.error);
        window._stores = data.stores;
        renderStoreList(data.stores);
        renderMarkers(data.stores);
      } catch (err) {
        document.getElementById('storeList').innerHTML = `<div class="error-msg"><strong>âš ï¸ ê²€ìƒ‰ ì‹¤íŒ¨</strong>${err.message}</div>`;
        document.getElementById('sidebar-count').textContent = 'ì˜¤ë¥˜ ë°œìƒ';
      } finally {
        showMapLoading(false);
        isSearching = false;
      }
    }

    function showMapLoading(show) {
      document.getElementById('mapLoading').classList.toggle('show', show);
    }

    function renderStoreList(stores) {
      document.getElementById('sidebar-title').textContent = `${currentEmoji} ${currentQuery}`;
      document.getElementById('sidebar-count').innerHTML =
        stores.length > 0 ? `ê²€ìƒ‰ ê²°ê³¼ <strong>${stores.length}ê³³</strong>` : 'ì´ ì§€ì—­ì— ë§¤ì¥ì´ ì—†ìŠµë‹ˆë‹¤';

      if (stores.length === 0) {
        document.getElementById('storeList').innerHTML =
          '<div class="error-msg">ì´ ì§€ì—­ì—ì„œ ê²€ìƒ‰ëœ ë§¤ì¥ì´ ì—†ìŠµë‹ˆë‹¤.<br>ì§€ë„ë¥¼ ì´ë™í•˜ê±°ë‚˜ ë‹¤ë¥¸ ì§€ì—­ì„ ê²€ìƒ‰í•´ë³´ì„¸ìš”.</div>';
        return;
      }

      document.getElementById('storeList').innerHTML = stores.map((s, i) => {
        return `
      <div class="store-item" id="store-${i}" onclick="selectStore(${i})">
        <div class="store-name">${s.name}</div>
        <div class="store-addr">ğŸ“ ${s.addr}</div>
        <div class="store-meta">
          ${s.category ? `<span class="badge">${s.category.split('>').pop()}</span>` : ''}
          ${s.phone ? `<span class="badge">ğŸ“ ${s.phone}</span>` : ''}
        </div>
      </div>`;
      }).join('');
    }

    function clearMarkers() {
      markers.forEach(m => m.setMap(null));
      markers = [];
    }

    function renderMarkers(stores) {
      const color = COLORS[currentQuery] || '#CCFFCC';
      stores.forEach((store, i) => {
        if (!store.lat || !store.lng) return;
        const overlay = new kakao.maps.CustomOverlay({
          position: new kakao.maps.LatLng(store.lat, store.lng),
          yAnchor: 1,
          content: `<div onclick="selectStore(${i})" style="background:${color};width:34px;height:34px;border-radius:50% 50% 50% 0;transform:rotate(-45deg);display:flex;align-items:center;justify-content:center;box-shadow:0 3px 10px rgba(0,0,0,0.2);cursor:pointer;border:2px solid rgba(0,0,0,0.15)"><span style="transform:rotate(45deg);font-size:15px">${currentEmoji}</span></div>`,
        });
        overlay.setMap(kakaoMap);
        markers.push(overlay);
      });
    }

    function selectStore(index) {
      const store = window._stores?.[index];
      if (!store) return;

      document.querySelectorAll('.store-item').forEach(el => el.classList.remove('selected'));
      const item = document.getElementById(`store-${index}`);
      if (item) { item.classList.add('selected'); item.scrollIntoView({ behavior: 'smooth', block: 'nearest' }); }



      document.getElementById('detailName').textContent = store.name;
      document.getElementById('detailAddr').textContent = store.addr || 'ì£¼ì†Œ ì •ë³´ ì—†ìŒ';

      const phoneRow = document.getElementById('detailPhoneRow');
      if (store.phone) {
        document.getElementById('detailPhone').textContent = store.phone;
        phoneRow.style.display = 'flex';
      } else {
        phoneRow.style.display = 'none';
      }

      document.getElementById('btnNaver').href =
        `https://map.naver.com/v5/search/${encodeURIComponent(store.name + ' ' + store.addr)}`;
      document.getElementById('btnKakao').href =
        store.kakaoUrl || `https://map.kakao.com/link/search/${encodeURIComponent(store.name)}`;

      // ìƒì„¸ íŒ¨ë„ í‘œì‹œ
      document.getElementById('detailPanel').classList.add('show');
    }

    function closeDetail() {
      document.getElementById('detailPanel').classList.remove('show');
      document.querySelectorAll('.store-item').forEach(el => el.classList.remove('selected'));
    }

    function toggleBottomSheet() {
      // ê³ ì • ë ˆì´ì•„ì›ƒ - ë°”í…€ì‹œíŠ¸ ì—†ìŒ
    }

    let coupangScriptLoaded = false;

    function updateCoupangBanner(query) {
      // ëª¨ë“  íƒ­ì—ì„œ ë™ì¼í•œ ë°°ë„ˆ í‘œì‹œ
      const banner = document.getElementById('coupangBanner');
      if (banner) banner.style.display = 'block';
    }

    function renderCoupang() {
      const sidebarEl = document.getElementById('sidebar');
      const w = sidebarEl ? sidebarEl.offsetWidth : 2000;
      document.getElementById('coupangItems').innerHTML = '';
      new PartnersCoupang.G({
        "id": 967242,
        "template": "carousel",
        "trackingCode": "AF6001579",
        "width": "2000",
        "height": "50",
        "tsource": ""
      });
    }

    function switchCategory(tabEl) {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      tabEl.classList.add('active');
      currentQuery = tabEl.dataset.query;
      currentEmoji = tabEl.dataset.emoji;
      updateCoupangBanner(currentQuery);
      loadStores();
    }

    function onSidoChange() {
      const sido = document.getElementById('sidoSelect').value;
      const sigungu = document.getElementById('sigunguSelect');
      sigungu.innerHTML = '<option value="">ì‹œ/êµ°/êµ¬ ì„ íƒ</option>';
      if (!sido) { sigungu.disabled = true; return; }
      (SIGUNGU_DATA[sido] || []).forEach(gu => {
        const opt = document.createElement('option');
        opt.value = `${sido} ${gu}`; opt.textContent = gu;
        sigungu.appendChild(opt);
      });
      sigungu.disabled = false;
    }

    async function onSigunguChange() {
      const val = document.getElementById('sigunguSelect').value;
      if (val) await moveToRegion(val);
    }

    async function searchRegion() {
      const val = document.getElementById('regionInput').value.trim();
      if (val) await moveToRegion(val);
    }

    async function moveToRegion(regionName) {
      try {
        const res = await fetch(`/api/geocode?query=${encodeURIComponent(regionName)}`);
        const data = await res.json();
        if (data.error) { alert(`"${regionName}"ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`); return; }
        kakaoMap.setCenter(new kakao.maps.LatLng(data.lat, data.lng));
        kakaoMap.setLevel(7);
        loadStores();
      } catch { alert('ì§€ì—­ ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'); }
    }

    window.onload = () => {
      // ì¿ íŒ¡ ë°°ë„ˆ ì´ˆê¸° ë¡œë“œ
      const cpScript = document.createElement('script');
      cpScript.src = 'https://ads-partners.coupang.com/g.js';
      cpScript.onload = () => renderCoupang();
      document.head.appendChild(cpScript);
      document.getElementById('coupangBanner').style.display = 'block';

      if (typeof kakao !== 'undefined' && kakao.maps) {
        initMap();
      } else {
        document.getElementById('map').innerHTML =
          '<div style="padding:60px;text-align:center;color:#888">ì¹´ì¹´ì˜¤ ì§€ë„ API í‚¤ë¥¼ HTML ìƒë‹¨ì— ì…ë ¥í•´ì£¼ì„¸ìš”.</div>';
      }
    };
  </script>
</body>

</html>